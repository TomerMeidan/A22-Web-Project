<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shifts - Main</title>
    <!-- Include Tailwind CSS via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
 </head>
 <body class="bg-gray-100 font-sans leading-normal tracking-normal" onload="buildShiftsTable()">

    <header class="flex justify-center items-center h-16 bg-blue-500 text-white">
      <h1 class="text-xl">Factory Management Site</h1>
    </header>
    <main class="container mx-auto px-4 py-8">
      <div class="flex flex-wrap justify-center">
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded m-2" onclick="location.href = '../index.html';">Homepage</button>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded m-2" onclick="location.href = '../employees/employees.html';">Employees</button>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded m-2" onclick="location.href = '../departments/departments.html';">Departments</button>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded m-2" onclick="location.href = 'shifts.html';">Shifts</button>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded m-2" onclick="location.href = '../users/users.html';">Users</button>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded m-2" onclick="location.href = '../index.html';">Logout</button>
      </div>
      <div class="mt-8">
        <h3 class="text-lg font-semibold mb-4" id="user-name">Welcome, User</h3>
        <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-4" onclick="location.href = './new-shift';">
          Add New Shift
        </button>
        <table class="w-full bg-white shadow-md rounded mt-6">
          <thead>
            <tr>
              <th class="border px-4 py-2">Shift ID</th>
              <th class="border px-4 py-2">Date</th>
              <th class="border px-4 py-2">Starting Hour</th>
              <th class="border px-4 py-2">Ending Hour</th>
            </tr>
          </thead>
          <tbody id="shifts-table">
            <!-- Table rows will be populated by JavaScript -->
          </tbody>
        </table>
      </div>
    </main>

    <script>
      function buildShiftsTable() {
        let shiftsTable = document.getElementById("shifts-table");

        // Fake data
        const shiftsData = [
          {
            _id: '1',
            date: '2023-04-01',
            startingHour: '08:00',
            endingHour: '16:00'
          },
          {
            _id: '2',
            date: '2023-04-02',
            startingHour: '16:00',
            endingHour: '00:00'
          },
          // ... more shifts
        ];

        shiftsData.forEach((shift) => {
          let row = shiftsTable.insertRow(-1);
          row.setAttribute("id", shift._id);

          let shiftIDCell = row.insertCell(0);
          let shiftDateCell = row.insertCell(1);
          let shiftStartingHourCell = row.insertCell(2);
          let shiftEndingHourCell = row.insertCell(3);

          shiftIDCell.innerHTML = `<a href="javascript: void(0)" class="text-blue-500 hover:underline">${shift._id}</a>`;
          shiftIDCell.addEventListener("click", () => {
            sessionStorage["editShiftID"] = shift._id;
            location.href = "./edit-shift";
          });
          shiftDateCell.innerHTML = shift.date;
          shiftStartingHourCell.innerHTML = shift.startingHour;
          shiftEndingHourCell.innerHTML = shift.endingHour;
        });

        const name = sessionStorage["name"] || "User";
        document.getElementById("user-name").innerText = `Welcome, ${name}`;
      }
    </script>
 </body>
</html>
